{% assign lang = page.lang | default: 0 %}
{% assign locale = site.t[lang].locale %}

{% assign pages = site.pages | where:"ref", page.ref | sort: 'lang' %}

<div class="page__footer-language">
  <ul>
    <li><strong>{{ site.data.ui-text[locale].language | default: "Language" }}:</strong></li>
    {% for page in pages %}
      {% if forloop.first == false %}
        <li> / </li>
      {% endif %}
      {% if page.url contains 'http' %}
        {% assign domain = '' %}
      {% else %}
        {% assign domain = site.url | append: site.baseurl %}
      {% endif %}
      {% assign that_locale = site.t[page.lang].locale %}
      <li><a href="{{ domain }}{{ page.url }}" class="{{ that_locale }}">{{ site.data.ui-text[that_locale].language_name }}</a></li>
    {% endfor %}
  </ul>
</div>


<div class="page__footer-follow">
  <ul class="social-icons">
    {% if site.data.ui-text[locale].follow_label %}
      <li><strong>{{ site.data.ui-text[locale].follow_label }}</strong></li>
    {% endif %}

    {% if site.footer.links %}
      {% for link in site.footer.links %}
        {% if link.label and link.url %}
          <li><a href="{{ link.url }}" rel="nofollow noopener noreferrer"><i class="{{ link.icon | default: 'fas fa-link' }}" aria-hidden="true"></i> {{ link.label }}</a></li>
        {% endif %}
      {% endfor %}
    {% endif %}

    <li><a href="{% if site.atom_feed.path %}{{ site.atom_feed.path }}{% else %}{{ '/feed.xml' | relative_url }}{% endif %}"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> {{ site.data.ui-text[locale].feed_label | default: "Feed" }}</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; {{ site.time | date: '%Y' }} {{ site.name | default: site.title }}. {{ site.data.ui-text[site.locale].powered_by | default: "Powered by" }} <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>
